<h2 mat-dialog-title>{{'place.editor.title' | translate:{ name: place.name } }}</h2>
<mat-dialog-content>
  @if (isChild(place)) {
    <mat-card appearance="outlined">
      <mat-card-content [innerHTML]="'place.editor.childPlaceNotice' | translate: { name: place.parent.name }"></mat-card-content>
      <mat-card-actions>
        <button mat-button (click)="openParent(place.parent)">{{ 'place.actions.edit' | translate }}</button>
      </mat-card-actions>
    </mat-card>
  }
  <div class="row">
    <mat-form-field>
      <mat-label>{{ 'place.editor.name.label' | translate }}</mat-label>
      <input matInput [formControl]="nameInput" required />
      <mat-error *ngIf="nameInput.invalid">{{ error(nameInput, {
        required: 'place.editor.name.required' | translate
      }) }}</mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{ 'place.editor.attestation.label' | translate }}</mat-label>
      <mat-select [formControl]="attestationInput">
        @if (isChild(place)) {
          <mat-option>{{ 'place.editor.attestation.inherited' | translate }}</mat-option>
        }
        @for(attestationType of attestationTypes().values(); track attestationType.id) {
          <mat-option [value]="attestationType">{{ getString(attestationType.name) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  @if (isLeaf(place)) {
    <mat-form-field class="wide">
      <mat-label>{{ 'place.editor.address.label' | translate }}</mat-label>
      <textarea matInput [formControl]="addressInput!" required></textarea>
      <mat-error *ngIf="addressInput!.invalid">{{ error(addressInput!, {
        required: 'place.editor.address.required' | translate
      }) }}</mat-error>
    </mat-form-field>
    <div class="row">
      <mat-form-field>
        <mat-label>{{ 'place.editor.region.label' | translate }}</mat-label>
        <mat-select [formControl]="regionInput!">
          @for(region of regions!().values(); track region.id) {
            <mat-option [value]="region">{{ getString(region.name) }}</mat-option>
          }
        </mat-select>
        <mat-error *ngIf="regionInput!.invalid">{{ error(regionInput!, {
          required: 'place.editor.region.required' | translate
        }) }}</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{ 'place.editor.gid.label' | translate }}</mat-label>
        <input matInput [formControl]="gidInput" readonly />
      </mat-form-field>
    </div>
    <div class="row">
      <mat-form-field>
        <mat-label>{{ 'place.editor.latitude.label' | translate }}</mat-label>
        <input matInput [formControl]="latitudeInput!" required />
        <mat-error *ngIf="latitudeInput!.invalid">{{ error(latitudeInput!, {
          required: 'place.editor.latitude.required' | translate,
          min: 'place.editor.latitude.belowMinimum' | translate,
          max: 'place.editor.latitude.aboveMaximum' | translate
        }) }}</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>{{ 'place.editor.longitude.label' | translate }}</mat-label>
        <input matInput [formControl]="longitudeInput!" required />
        <mat-error *ngIf="longitudeInput!.invalid">{{ error(longitudeInput!, {
          required: 'place.editor.longitude.required' | translate,
          min: 'place.editor.longitude.belowMinimum' | translate,
          max: 'place.editor.longitude.aboveMaximum' | translate
        }) }}</mat-error>
      </mat-form-field>
    </div>
  }
  <app-localized-string-form-field [control]="descriptionInput" />
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button (click)="openSearch()">{{ 'place.editor.searchOnGoogleMaps' | translate }}</button>
  <button mat-button (click)="cancel()">{{ 'general.dialog.buttons.cancel' | translate }}</button>
  <button mat-button cdkFocusInitial [disabled]="isValid()">{{ 'general.dialog.buttons.save' | translate }}</button>
</mat-dialog-actions>
